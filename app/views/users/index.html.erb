<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'></script>



<h3>Nearby Performers</h3>

<div style='width: 100%'>
  <div id="map" style='width: 100%; height: 250px;'></div>
</div>

  <% if @users.count == 0 %>
    <%= 'No Nearby Performers' %>
  <% else %>
  <table>
    <thead>
      <tr>
        <th>Artist</th>
        <th>Description</th>
        <th>Address</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @users.each do |user| %>
        <tr>
          <!-- <td><%= user.latitude %></td>
          <td><%= user.longitude %></td> -->
          <td width="30%"><%= user.title %></td>
          <td width="30%"><%= user.description %></td>
          <td width="40%"><%= user.address %></td>
          <!-- <td><%= link_to 'Show', user %></td>
          <td><%= link_to 'Edit', edit_user_path(user) %></td>
          <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %></td> -->
        </tr>
      <% end %>
    </tbody>
  <% end %>
</table>

<br>

<%= link_to 'Report Performer Location', new_user_path %>




<div id="map">
<script type="text/javascript" charset="utf-8">
// class InfoBoxBuilder extends Gmaps.Google.Builders.Marker # inherit from base builder
//   # override method
//   create_infowindow: ->
//     return null unless _.isString @args.infowindow

//     boxText = document.createElement("div")
//     boxText.setAttribute("class", 'black') #to customize
//     boxText.innerHTML = @args.infowindow
//     @infowindow = new InfoBox(@infobox(boxText))

//     # add @bind_infowindow() for < 2.1

//   infobox: (boxText)->
//     content: boxText
//     pixelOffset: new google.maps.Size(-140, 0)
//     boxStyle:
//       width: "280px"
<!-- DONT TOUCH MAP IS WORKING -->
// buildMap(<%=raw @hash.to_json %>)
handler = Gmaps.build('Google');
handler.buildMap({
  provider: {
    disableDefaultUI: true
  },
  internal: {
    id: 'map'
  }},
  function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
});
<!-- DONT TOUCH MAP IS WORKING -->
</script>
</div>



<!-- <script type="text/javascript" charset="utf-8">

// // Create an array of styles.
//   var myStyle = [
//   {
//     "featureType": "water",
//     "elementType": "geometry.fill",
//     "stylers": [
//       { "color": "#ffe910" },
//       { "visibility": "on" }
//     ]
//   },{
//     "featureType": "landscape.natural",
//     "stylers": [
//       { "color": "#ff3130" }
//     ]
//   },{
//   }
// ]

// </script>

-->
